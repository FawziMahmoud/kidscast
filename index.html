<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KidsCast Explorer - Magical Learning Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(-2deg); }
            50% { transform: translateY(-20px) rotate(2deg); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(3deg); }
            75% { transform: rotate(-3deg); }
        }

        @keyframes sparkle {
            0% { opacity: 0; transform: scale(0) rotate(0deg); }
            50% { opacity: 1; transform: scale(1) rotate(180deg); }
            100% { opacity: 0; transform: scale(0) rotate(360deg); }
        }

        @keyframes slide-up {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        @keyframes dance {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(-10deg); }
            75% { transform: translateY(-20px) rotate(10deg); }
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Comic Neue', cursive, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(255, 219, 98, 0.3) 0%, transparent 50%);
            pointer-events: none;
            animation: float 20s ease-in-out infinite;
        }

        .stars {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            animation: sparkle 3s linear infinite;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: slide-up 0.6s ease-out;
        }

        .logo {
            font-size: 3em;
            color: #FFE66D;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
            animation: wiggle 2s ease-in-out infinite;
            display: inline-block;
            font-weight: bold;
            background: linear-gradient(45deg, #FFE66D, #FF6B6B, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .topic-universe {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
            animation: slide-up 0.8s ease-out;
        }

        .topic-bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: float 3s ease-in-out infinite;
            animation-delay: var(--delay);
        }

        .topic-bubble:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .topic-bubble.dino { background: linear-gradient(135deg, #96CEB4, #88A875); }
        .topic-bubble.space { background: linear-gradient(135deg, #2E3192, #1BFFFF); }
        .topic-bubble.ocean { background: linear-gradient(135deg, #00B4DB, #0083B0); }
        .topic-bubble.safari { background: linear-gradient(135deg, #FFB75E, #ED8F03); }
        .topic-bubble.science { background: linear-gradient(135deg, #C33764, #1D2671); }
        .topic-bubble.fairy { background: linear-gradient(135deg, #FC466B, #3F5EFB); }
        .topic-bubble.robot { background: linear-gradient(135deg, #42275a, #734b6d); }
        .topic-bubble.world { background: linear-gradient(135deg, #11998e, #38ef7d); }
        .topic-bubble.hero { background: linear-gradient(135deg, #ee0979, #ff6a00); }
        .topic-bubble.art { background: linear-gradient(135deg, #f093fb, #f5576c); }

        .topic-icon {
            font-size: 3em;
            animation: bounce 2s ease-in-out infinite;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }

        .topic-label {
            color: white;
            font-size: 0.9em;
            font-weight: bold;
            margin-top: 5px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .player-container {
            display: none;
            background: white;
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            animation: slide-up 0.5s ease-out;
        }

        .player-container.active {
            display: block;
        }

        .player-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.1;
            pointer-events: none;
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .episode-title {
            font-size: 1.5em;
            color: #333;
            font-weight: bold;
        }

        .close-player {
            background: #FF6B6B;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-player:hover {
            transform: rotate(90deg) scale(1.1);
            background: #FF5252;
        }

        .player-character {
            width: 100px;
            height: 100px;
            margin: 20px auto;
            font-size: 4em;
            animation: breathe 3s ease-in-out infinite;
            text-align: center;
        }

        .player-character.playing {
            animation: dance 1s ease-in-out infinite;
        }

        .player-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            position: relative;
            z-index: 1;
        }

        .control-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            font-size: 1.5em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .play-btn {
            width: 80px;
            height: 80px;
            font-size: 2em;
        }

        .skip-btn {
            width: 50px;
            height: 50px;
        }

        .control-btn:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .progress-container {
            background: #E8E8E8;
            border-radius: 20px;
            height: 40px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .progress-bar {
            background: linear-gradient(90deg, #4ECDC4, #44A08D);
            height: 100%;
            width: 0%;
            border-radius: 20px;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-character {
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 30px;
            animation: bounce 1s ease-in-out infinite;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .speed-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .speed-btn {
            background: white;
            border: 3px solid #667eea;
            border-radius: 15px;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2em;
        }

        .speed-btn.active {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }

        .speed-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .quiz-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            z-index: 1000;
            max-width: 500px;
            width: 90%;
            animation: bounce 0.5s ease-out;
        }

        .quiz-popup.active {
            display: block;
        }

        .quiz-question {
            font-size: 1.5em;
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .quiz-options {
            display: grid;
            gap: 15px;
        }

        .quiz-option {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 15px 20px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            font-weight: bold;
        }

        .quiz-option:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .quiz-option.correct {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            animation: pulse 0.5s ease-out;
        }

        .quiz-option.wrong {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            animation: wiggle 0.5s ease-out;
        }

        .sticker-book {
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .sticker-book-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .sticker-book-title {
            font-size: 1.8em;
            color: #333;
            font-weight: bold;
        }

        .sticker-progress {
            background: #E8E8E8;
            border-radius: 20px;
            height: 30px;
            width: 200px;
            overflow: hidden;
            position: relative;
        }

        .sticker-progress-bar {
            background: linear-gradient(90deg, #FFE66D, #FF6B6B);
            height: 100%;
            width: 30%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: bold;
        }

        .sticker-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 20px;
        }

        .sticker {
            aspect-ratio: 1;
            background: #F5F5F5;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            position: relative;
            transition: all 0.3s ease;
        }

        .sticker.earned {
            background: linear-gradient(135deg, #FFE66D, #FF6B6B);
            animation: wiggle 0.5s ease-out;
            cursor: pointer;
        }

        .sticker.earned:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .sticker.locked {
            opacity: 0.3;
            border: 3px dashed #CCC;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 9999;
            animation: confetti-fall 3s ease-out forwards;
        }

        .xp-float {
            position: fixed;
            font-size: 2em;
            font-weight: bold;
            color: #FFE66D;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: float-up 2s ease-out forwards;
            z-index: 9999;
            pointer-events: none;
        }

        @keyframes float-up {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100px); opacity: 0; }
        }

        .parental-button {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .parental-button:hover {
            transform: scale(1.1) rotate(180deg);
            background: white;
        }

        .listening-buddy {
            position: fixed;
            bottom: 30px;
            right: 30px;
            font-size: 4em;
            animation: bounce 2s ease-in-out infinite;
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.3));
            z-index: 90;
        }

        .listening-buddy:hover {
            transform: scale(1.2) rotate(10deg);
        }

        .listening-buddy.celebrating {
            animation: dance 0.5s ease-in-out;
        }

        .mini-game {
            display: none;
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .mini-game.active {
            display: block;
        }

        .sound-wave {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            height: 40px;
            margin: 20px 0;
        }

        .wave-bar {
            width: 4px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
            animation: wave 1s ease-in-out infinite;
            animation-delay: var(--delay);
        }

        @keyframes wave {
            0%, 100% { height: 10px; }
            50% { height: 40px; }
        }

        .streak-counter {
            position: fixed;
            top: 20px;
            left: 20px;
            background: linear-gradient(135deg, #FFB75E, #ED8F03);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 100;
        }

        .streak-fire {
            font-size: 1.5em;
            animation: pulse 1s ease-in-out infinite;
        }

        @media (max-width: 768px) {
            .topic-universe {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 20px;
            }
            
            .topic-icon {
                font-size: 2.5em;
            }
            
            .logo {
                font-size: 2em;
            }
        }

        .particle {
            position: fixed;
            pointer-events: none;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%);
            border-radius: 50%;
            animation: sparkle 1s ease-out forwards;
        }

        .loading-spinner {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <button class="parental-button" onclick="openParentalDashboard()">üîí</button>
    
    <div class="streak-counter">
        <span class="streak-fire">üî•</span>
        <span>3 Day Streak!</span>
    </div>
    
    <div class="listening-buddy" id="buddy" onclick="toggleBuddy()">ü¶Ñ</div>
    
    <div class="container">
        <header class="header">
            <h1 class="logo">üåü KidsCast Explorer üåü</h1>
        </header>
        
        <div class="topic-universe" id="topicUniverse">
            <div class="topic-bubble dino" style="--delay: 0s" onclick="openPlayer('dino')">
                <div class="topic-icon">ü¶ï</div>
                <div class="topic-label">Dinosaurs</div>
            </div>
            <div class="topic-bubble space" style="--delay: 0.2s" onclick="openPlayer('space')">
                <div class="topic-icon">üöÄ</div>
                <div class="topic-label">Space</div>
            </div>
            <div class="topic-bubble ocean" style="--delay: 0.4s" onclick="openPlayer('ocean')">
                <div class="topic-icon">üåä</div>
                <div class="topic-label">Ocean</div>
            </div>
            <div class="topic-bubble safari" style="--delay: 0.6s" onclick="openPlayer('safari')">
                <div class="topic-icon">ü¶Å</div>
                <div class="topic-label">Safari</div>
            </div>
            <div class="topic-bubble science" style="--delay: 0.8s" onclick="openPlayer('science')">
                <div class="topic-icon">üß™</div>
                <div class="topic-label">Science</div>
            </div>
            <div class="topic-bubble fairy" style="--delay: 1s" onclick="openPlayer('fairy')">
                <div class="topic-icon">üè∞</div>
                <div class="topic-label">Fairy Tales</div>
            </div>
            <div class="topic-bubble robot" style="--delay: 1.2s" onclick="openPlayer('robot')">
                <div class="topic-icon">ü§ñ</div>
                <div class="topic-label">Robots</div>
            </div>
            <div class="topic-bubble world" style="--delay: 1.4s" onclick="openPlayer('world')">
                <div class="topic-icon">üåç</div>
                <div class="topic-label">World</div>
            </div>
            <div class="topic-bubble hero" style="--delay: 1.6s" onclick="openPlayer('hero')">
                <div class="topic-icon">ü¶∏</div>
                <div class="topic-label">Heroes</div>
            </div>
            <div class="topic-bubble art" style="--delay: 1.8s" onclick="openPlayer('art')">
                <div class="topic-icon">üé®</div>
                <div class="topic-label">Art & Music</div>
            </div>
        </div>
        
        <div class="player-container" id="playerContainer">
            <div class="player-background" id="playerBg"></div>
            <div class="player-header">
                <h2 class="episode-title" id="episodeTitle">Episode Title</h2>
                <button class="close-player" onclick="closePlayer()">‚úï</button>
            </div>
            
            <div class="player-character" id="playerCharacter">ü¶ï</div>
            
            <div class="sound-wave">
                <div class="wave-bar" style="--delay: 0s"></div>
                <div class="wave-bar" style="--delay: 0.1s"></div>
                <div class="wave-bar" style="--delay: 0.2s"></div>
                <div class="wave-bar" style="--delay: 0.3s"></div>
                <div class="wave-bar" style="--delay: 0.4s"></div>
                <div class="wave-bar" style="--delay: 0.5s"></div>
                <div class="wave-bar" style="--delay: 0.6s"></div>
                <div class="wave-bar" style="--delay: 0.7s"></div>
            </div>
            
            <div class="progress-container" onclick="seekAudio(event)">
                <div class="progress-bar" id="progressBar">
                    <div class="progress-character" id="progressChar">ü¶ï</div>
                </div>
            </div>
            
            <div class="time-display">
                <span id="currentTime">0:00</span>
                <span id="totalTime">5:00</span>
            </div>
            
            <div class="player-controls">
                <button class="control-btn skip-btn" onclick="skip(-10)">‚è™</button>
                <button class="control-btn play-btn" id="playBtn" onclick="togglePlay()">‚ñ∂Ô∏è</button>
                <button class="control-btn skip-btn" onclick="skip(10)">‚è©</button>
            </div>
            
            <div class="speed-controls">
                <button class="speed-btn" onclick="setSpeed(0.5)">üêå</button>
                <button class="speed-btn" onclick="setSpeed(0.75)">üê¢</button>
                <button class="speed-btn active" onclick="setSpeed(1)">üê∞</button>
                <button class="speed-btn" onclick="setSpeed(1.25)">üêÜ</button>
            </div>
        </div>
        
        <div class="quiz-popup" id="quizPopup">
            <h3 class="quiz-question" id="quizQuestion">How big was a T-Rex?</h3>
            <div class="quiz-options" id="quizOptions">
                <button class="quiz-option" onclick="checkAnswer(0)">As big as a house!</button>
                <button class="quiz-option" onclick="checkAnswer(1)">As tall as 2 giraffes!</button>
                <button class="quiz-option" onclick="checkAnswer(2)">As small as a cat!</button>
            </div>
        </div>
        
        <div class="sticker-book">
            <div class="sticker-book-header">
                <h2 class="sticker-book-title">‚ú® My Sticker Collection ‚ú®</h2>
                <div class="sticker-progress">
                    <div class="sticker-progress-bar" id="stickerProgress">12/40</div>
                </div>
            </div>
            <div class="sticker-grid" id="stickerGrid">
                <div class="sticker earned">‚≠ê</div>
                <div class="sticker earned">üèÜ</div>
                <div class="sticker earned">üéØ</div>
                <div class="sticker earned">üåü</div>
                <div class="sticker earned">üíé</div>
                <div class="sticker earned">üé®</div>
                <div class="sticker earned">üöÄ</div>
                <div class="sticker earned">ü¶Ñ</div>
                <div class="sticker earned">üåà</div>
                <div class="sticker earned">üé∏</div>
                <div class="sticker earned">üé™</div>
                <div class="sticker earned">üé≠</div>
                <div class="sticker locked">‚ùì</div>
                <div class="sticker locked">‚ùì</div>
                <div class="sticker locked">‚ùì</div>
                <div class="sticker locked">‚ùì</div>
            </div>
        </div>
    </div>

    <script>
        // Episode Data
        const episodes = {
            dino: {
                title: "T-Rex: The King of Dinosaurs! ü¶ñ",
                icon: "ü¶ï",
                duration: 300,
                quizzes: [
                    {
                        time: 60,
                        question: "How big was a T-Rex?",
                        options: ["As big as a house!", "As tall as 2 giraffes!", "As small as a cat!"],
                        correct: 1
                    },
                    {
                        time: 180,
                        question: "What did T-Rex eat?",
                        options: ["Plants and leaves", "Other dinosaurs", "Fish and bugs"],
                        correct: 1
                    }
                ]
            },
            space: {
                title: "Journey to the Moon! üåô",
                icon: "üöÄ",
                duration: 300,
                quizzes: [
                    {
                        time: 45,
                        question: "How many days to reach the Moon?",
                        options: ["1 day", "3 days", "30 days"],
                        correct: 1
                    }
                ]
            },
            ocean: {
                title: "Deep Sea Adventures! üê†",
                icon: "üê¨",
                duration: 300,
                quizzes: [
                    {
                        time: 90,
                        question: "What's the biggest ocean animal?",
                        options: ["Shark", "Blue Whale", "Octopus"],
                        correct: 1
                    }
                ]
            },
            safari: {
                title: "Lions of the Savannah! ü¶Å",
                icon: "ü¶Å",
                duration: 300,
                quizzes: []
            },
            science: {
                title: "Bubble Magic Experiments! ü´ß",
                icon: "üß™",
                duration: 300,
                quizzes: []
            }
        };

        let currentEpisode = null;
        let isPlaying = false;
        let currentTime = 0;
        let playInterval = null;
        let currentSpeed = 1;
        let earnedStickers = 12;
        let totalStickers = 40;
        let buddyAnimating = false;

        // Initialize stars
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        // Create particle effect on mouse move
        function createParticle(x, y) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 1000);
        }

        // Mouse trail effect
        let mouseTimer;
        document.addEventListener('mousemove', (e) => {
            clearTimeout(mouseTimer);
            mouseTimer = setTimeout(() => {
                createParticle(e.clientX, e.clientY);
            }, 50);
        });

        // Open player with theme
        function openPlayer(topic) {
            currentEpisode = episodes[topic] || episodes.dino;
            const container = document.getElementById('playerContainer');
            const title = document.getElementById('episodeTitle');
            const character = document.getElementById('playerCharacter');
            const progressChar = document.getElementById('progressChar');
            const bg = document.getElementById('playerBg');
            
            container.classList.add('active');
            title.textContent = currentEpisode.title;
            character.textContent = currentEpisode.icon;
            progressChar.textContent = currentEpisode.icon;
            
            // Theme background
            if (topic === 'dino') {
                bg.style.background = 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Ctext y=\'50\' font-size=\'50\'%3Eüå¥%3C/text%3E%3C/svg%3E")';
            } else if (topic === 'space') {
                bg.style.background = 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'%3E%3Ctext y=\'50\' font-size=\'30\'%3E‚≠ê%3C/text%3E%3C/svg%3E")';
            }
            
            // Reset player
            currentTime = 0;
            updateProgress();
            
            // Play sound effect
            playSound('open');
            
            // Celebrate
            celebrate();
        }

        function closePlayer() {
            document.getElementById('playerContainer').classList.remove('active');
            pauseAudio();
            playSound('close');
        }

        function togglePlay() {
            if (isPlaying) {
                pauseAudio();
            } else {
                playAudio();
            }
        }

        function playAudio() {
            isPlaying = true;
            const btn = document.getElementById('playBtn');
            const character = document.getElementById('playerCharacter');
            btn.textContent = '‚è∏Ô∏è';
            character.classList.add('playing');
            
            playInterval = setInterval(() => {
                currentTime += currentSpeed;
                if (currentTime >= currentEpisode.duration) {
                    currentTime = currentEpisode.duration;
                    pauseAudio();
                    completeEpisode();
                }
                updateProgress();
                checkForQuiz();
            }, 1000);
            
            playSound('play');
        }

        function pauseAudio() {
            isPlaying = false;
            const btn = document.getElementById('playBtn');
            const character = document.getElementById('playerCharacter');
            btn.textContent = '‚ñ∂Ô∏è';
            character.classList.remove('playing');
            clearInterval(playInterval);
            playSound('pause');
        }

        function updateProgress() {
            const progress = (currentTime / currentEpisode.duration) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentTime').textContent = formatTime(currentTime);
            document.getElementById('totalTime').textContent = formatTime(currentEpisode.duration);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function skip(seconds) {
            currentTime = Math.max(0, Math.min(currentEpisode.duration, currentTime + seconds));
            updateProgress();
            playSound('skip');
        }

        function seekAudio(event) {
            const rect = event.currentTarget.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const width = rect.width;
            const percentage = x / width;
            currentTime = percentage * currentEpisode.duration;
            updateProgress();
            playSound('seek');
        }

        function setSpeed(speed) {
            currentSpeed = speed;
            document.querySelectorAll('.speed-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            playSound('speed');
        }

        function checkForQuiz() {
            if (!currentEpisode.quizzes) return;
            
            const quiz = currentEpisode.quizzes.find(q => 
                Math.abs(q.time - currentTime) < 1 && !q.shown
            );
            
            if (quiz) {
                quiz.shown = true;
                pauseAudio();
                showQuiz(quiz);
            }
        }

        function showQuiz(quiz) {
            const popup = document.getElementById('quizPopup');
            const question = document.getElementById('quizQuestion');
            const options = document.getElementById('quizOptions');
            
            popup.classList.add('active');
            question.textContent = quiz.question;
            
            options.innerHTML = quiz.options.map((opt, i) => 
                `<button class="quiz-option" onclick="checkAnswer(${i}, ${quiz.correct})">${opt}</button>`
            ).join('');
            
            playSound('quiz');
        }

        function checkAnswer(selected, correct) {
            const options = document.querySelectorAll('.quiz-option');
            
            if (selected === correct) {
                options[selected].classList.add('correct');
                setTimeout(() => {
                    document.getElementById('quizPopup').classList.remove('active');
                    earnSticker();
                    showXP(10);
                    playAudio();
                }, 1500);
                createConfetti();
                celebrateBuddy();
                playSound('correct');
            } else {
                options[selected].classList.add('wrong');
                setTimeout(() => {
                    options[selected].classList.remove('wrong');
                }, 500);
                playSound('wrong');
            }
        }

        function earnSticker() {
            const lockedStickers = document.querySelectorAll('.sticker.locked');
            if (lockedStickers.length > 0) {
                const sticker = lockedStickers[0];
                sticker.classList.remove('locked');
                sticker.classList.add('earned');
                sticker.textContent = ['üéØ', 'üåü', 'üíé', 'üé®', 'üöÄ'][Math.floor(Math.random() * 5)];
                
                earnedStickers++;
                updateStickerProgress();
            }
        }

        function updateStickerProgress() {
            const progress = document.getElementById('stickerProgress');
            progress.textContent = `${earnedStickers}/${totalStickers}`;
            progress.style.width = (earnedStickers / totalStickers * 100) + '%';
        }

        function createConfetti() {
            const colors = ['#FF6B6B', '#4ECDC4', '#FFE66D', '#95E1D3', '#C9B1FF'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 20);
            }
        }

        function showXP(amount) {
            const xp = document.createElement('div');
            xp.className = 'xp-float';
            xp.textContent = `+${amount} XP`;
            xp.style.left = '50%';
            xp.style.top = '50%';
            document.body.appendChild(xp);
            setTimeout(() => xp.remove(), 2000);
        }

        function celebrate() {
            createConfetti();
            celebrateBuddy();
        }

        function celebrateBuddy() {
            const buddy = document.getElementById('buddy');
            buddy.classList.add('celebrating');
            setTimeout(() => buddy.classList.remove('celebrating'), 1000);
        }

        function toggleBuddy() {
            if (buddyAnimating) return;
            buddyAnimating = true;
            const buddy = document.getElementById('buddy');
            const buddies = ['ü¶Ñ', 'üêª', 'üê∂', 'üê±', 'üê∞', 'ü¶ä', 'üêº', 'üê®', 'üê∏', 'ü¶Å'];
            const currentIndex = buddies.indexOf(buddy.textContent);
            const nextIndex = (currentIndex + 1) % buddies.length;
            
            buddy.style.transform = 'scale(1.5) rotate(360deg)';
            setTimeout(() => {
                buddy.textContent = buddies[nextIndex];
                buddy.style.transform = 'scale(1) rotate(0deg)';
                buddyAnimating = false;
            }, 300);
            
            playSound('buddy');
        }

        function completeEpisode() {
            earnSticker();
            showXP(50);
            celebrate();
            setTimeout(() => {
                alert('üéâ Great job! You completed the episode! üéâ');
            }, 1000);
        }

        function openParentalDashboard() {
            const password = prompt('Enter parent password:');
            if (password === '1234') {
                alert('Parental Dashboard: Coming soon! üë®‚Äçüë©‚Äçüëß‚Äçüë¶');
            } else if (password) {
                alert('Oops! Wrong password! üîí');
            }
        }

        function playSound(type) {
            // Sound effect placeholders
            const audio = new Audio();
            switch(type) {
                case 'open': console.log('üéµ Magical open sound'); break;
                case 'close': console.log('üéµ Gentle close sound'); break;
                case 'play': console.log('üéµ Play sound'); break;
                case 'pause': console.log('üéµ Pause sound'); break;
                case 'skip': console.log('üéµ Whoosh sound'); break;
                case 'quiz': console.log('üéµ Quiz chime'); break;
                case 'correct': console.log('üéµ Victory fanfare'); break;
                case 'wrong': console.log('üéµ Gentle buzzer'); break;
                case 'buddy': console.log('üéµ Giggle sound'); break;
            }
        }

        // Touch interactions
        document.addEventListener('touchstart', function(e) {
            const touch = e.touches[0];
            createParticle(touch.clientX, touch.clientY);
        });

        // Initialize
        createStars();
        updateStickerProgress();

        // Breathing animation for all elements
        setInterval(() => {
            document.querySelectorAll('.topic-bubble').forEach((bubble, i) => {
                setTimeout(() => {
                    bubble.style.transform = 'scale(1.05)';
                    setTimeout(() => {
                        bubble.style.transform = 'scale(1)';
                    }, 500);
                }, i * 100);
            });
        }, 5000);

        // Auto-save progress
        setInterval(() => {
            localStorage.setItem('kidscast_progress', JSON.stringify({
                earnedStickers,
                currentEpisode: currentEpisode?.title,
                currentTime
            }));
        }, 5000);

        // Load saved progress
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('kidscast_progress');
            if (saved) {
                const data = JSON.parse(saved);
                earnedStickers = data.earnedStickers || 12;
                updateStickerProgress();
            }
        });

        // Welcome message
        setTimeout(() => {
            celebrate();
        }, 1000);
    </script>
</body>
</html>